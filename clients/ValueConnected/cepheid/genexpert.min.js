var myApp=angular.module("myApp",[]).controller("myCtrl",["$scope",function(t){var r=this;r.model={C3:5.5,C13:12.1,C14:14,C27:50,C28:25,B1:1e4,B6:5.62,B7:13.33,B10:3,B11:500,B12:250,B18:5.62,B19:13.33,B24:3,B22:1379.75,B25:500,B29:250,I1:50,I7:0,I14:50,I26:0,K1:1,K14:1,get B3(){return this.C3/100},get B4(){return Math.round(this.B3*this.B1)},get B8(){return this.B6+this.B7},get B13(){return this.C13/100},get B14(){return this.C14/100},get B20(){return this.B18+this.B19},get B27(){return this.C27/100},get B28(){return this.C28/100},get B15(){return Math.round(this.B14*this.B1)},get D13(){return Math.round(this.B13*this.B4)},get I3(){return this.L3*this.B10},get I6(){return this.L3*this.B8},get I9(){return this.I11<this.J11?this.J11-this.I11:0},get I8(){return this.I3*this.B11},get I11(){return this.I6+this.I7+this.I8},get I16(){return this.L16*this.B24},get I19(){return this.I16*this.B25},get I20(){return this.L16*this.B22},get I21(){return this.I19+this.I20},get I25(){return this.L16*this.B20},get I27(){return this.I19},get I28(){return this.I20},get I29(){return this.I31<this.J31?this.J31-this.I31:0},get I31(){return this.I25+this.I26+this.I27+this.I28},get I32(){return this.I25+this.I26+this.I27+this.I28+this.I29},get J1(){return this.I1/100},get J3(){return(this.D13+this.L2)*this.B10},get J6(){return this.L2*this.B8},get J7(){return this.L1*this.B12},get J8(){return this.J3*this.B11},get J9(){return this.J11<=this.I11?this.I11-this.J11:0},get J11(){return this.J6+this.J7+this.J8},get J14(){return this.I14/100},get J16(){return Math.round(this.L15*this.B24+this.L14*this.B24*(1-this.B27))},get J19(){return this.J16*this.B25},get J20(){return Math.round(this.L15*this.B22+this.L14*this.B22*(1-this.B28),0)},get J21(){return this.J19+this.J20},get J25(){return this.L15*this.B20},get J26(){return this.L14*this.B29},get J27(){return this.J19},get J28(){return this.J20},get J29(){return this.J31<=this.I31?this.I31-this.J31:0},get J31(){return this.J25+this.J26+this.J27+this.J28},get J32(){return this.J25+this.J26+this.J27+this.J28+this.J29},get K3(){return this.I3>=this.J3?this.I3-this.J3:0},get K8(){return this.I8>=this.J8?this.I8-this.J8:0},get K19(){return this.I19>=this.J19?this.I19-this.J19:0},get L1(){return Math.round(this.J1*this.B4)},get L2(){return Math.round(this.B4-this.L1)},get L3(){return this.L1+this.L2},get L14(){return Math.round(this.J14*this.B15,0)},get L15(){return this.B15-this.L14},get L16(){return this.L14+this.L15}},t.$watch("vm.model",function(t,e){r.generateChartData(),myChart.update()},!0),r.generateChartData=(()=>{var t=[[r.model.I6,r.model.J6],[r.model.I7,r.model.J7],[r.model.I8,r.model.J8],[r.model.I9,r.model.J9]];myChart.config.data.datasets[0].data=t[0],myChart.config.data.datasets[1].data=t[1],myChart.config.data.datasets[2].data=t[2],myChart.config.data.datasets[3].data=t[3]}),r.$onInit=function(){const t=document.getElementById("myChart").getContext("2d"),e=["Grupo convencional","Grupo Xpert® testes"],i={labels:e,datasets:[{label:"Testes convencionais",data:[50,50],backgroundColor:"#DF6020",borderWidth:1,borderColor:"#DF6020"},{label:"Xpert® testes",data:[50,50],backgroundColor:"#74A333",borderWidth:1,borderColor:"#74A333",borderSkipped:!1},{label:"Isolamento",data:[50,50],backgroundColor:"#0079C1",borderWidth:1,borderColor:"#0079C1",borderSkipped:!1},{label:"Redução",data:[50,50],backgroundColor:"#fff",borderWidth:2,borderSkipped:"bottom"}]},s={type:"bar",data:i,options:{responsive:!0,scales:{x:{stacked:!0},y:{stacked:!0}},plugins:{legend:{position:"bottom"},title:{display:!1,text:"Chart.js Bar Chart"},tooltip:{mode:"x"}}}};myChart=new Chart(t,s),this.generateChartData(),myChart.update();var n=new bootstrap.Modal(document.getElementById("myModal"),{backdrop:"static",focus:!0});n.show(),console.log(r.model)}}]);myApp.directive("format",["$filter",function(t){return{require:"?ngModel",scope:{digits:"=?"},link:function(t,r,e,i){if(i){var s={prefix:"",centsSeparator:",",thousandsSeparator:".",centsLimit:t.digits};i.$parsers.unshift(function(t){return r.priceFormat(s),r[0].value}),i.$formatters.unshift(function(t){return r[0].value=100*i.$modelValue,r.priceFormat(s),r[0].value})}}}}]),function(t){t.fn.priceFormat=function(r){var e={prefix:"US$ ",suffix:"",centsSeparator:".",thousandsSeparator:",",limit:!1,centsLimit:2,clearPrefix:!1,clearSufix:!1,allowNegative:!1,insertPlusSign:!1};console.log(r);r=t.extend(e,r);return console.log(r),this.each(function(){function e(t){for(var r="",e=0;e<t.length;e++)char_=t.charAt(e),0==r.length&&0==char_&&(char_=!1),char_&&char_.match(c)&&(B?r.length<B&&(r+=char_):r+=char_);return r}function i(t){for(;t.length<p+1;)t="0"+t;return t}function s(r){var s=i(e(r)),n="",h=0;0==p&&(I="",a="");var a=s.substr(s.length-p,p),o=s.substr(0,s.length-p);if(s=0==p?o:o+I+a,m||""!=t.trim(m)){for(var u=o.length;u>0;u--)char_=o.substr(u-1,1),h++,h%3==0&&(char_=m+char_),n=char_+n;n.substr(0,1)==m&&(n=n.substring(1,n.length)),s=0==p?n:n+I+a}return!C||0==o&&0==a||(s=-1!=r.indexOf("-")&&r.indexOf("+")<r.indexOf("-")?"-"+s:b?"+"+s:""+s),g&&(s=g+s),f&&(s+=f),s}function n(t){var r=t.keyCode?t.keyCode:t.which,e=String.fromCharCode(r),i=!1,n=l.val(),h=s(n+e);(r>=48&&r<=57||r>=96&&r<=105)&&(i=!0),8==r&&(i=!0),9==r&&(i=!0),13==r&&(i=!0),46==r&&(i=!0),37==r&&(i=!0),39==r&&(i=!0),!C||189!=r&&109!=r||(i=!0),!b||187!=r&&107!=r||(i=!0),i||(t.preventDefault(),t.stopPropagation(),n!=h&&l.val(h))}function h(){var t=l.val(),r=s(t);t!=r&&l.val(r)}function a(){var t=l.val();l.val(g+t)}function o(){var t=l.val();l.val(t+f)}function u(){if(""!=t.trim(g)&&J){var r=l.val().split(g);l.val(r[1])}}function d(){if(""!=t.trim(f)&&v){var r=l.val().split(f);l.val(r[0])}}var l=t(this),c=/[0-9]/,g=r.prefix,f=r.suffix,I=r.centsSeparator,m=r.thousandsSeparator,B=r.limit,p=r.centsLimit,J=r.clearPrefix,v=r.clearSuffix,C=r.allowNegative,b=r.insertPlusSign;b&&(C=!0),t(this).bind("keydown.price_format",n),t(this).bind("keyup.price_format",h),t(this).bind("focusout.price_format",h),J&&(t(this).bind("focusout.price_format",function(){u()}),t(this).bind("focusin.price_format",function(){a()})),v&&(t(this).bind("focusout.price_format",function(){d()}),t(this).bind("focusin.price_format",function(){o()})),t(this).val().length>0&&(h(),u(),d())})},t.fn.unpriceFormat=function(){return t(this).unbind(".price_format")},t.fn.unmask=function(){var r=t(this).val(),e="";for(var i in r)isNaN(r[i])&&"-"!=r[i]||(e+=r[i]);return e}}(jQuery);